import{c as h,j as e,r,s as T,u as $,R as I,L as D,C as R,G as L,a as P,d as V}from"./main-BSoeFUy7.js";import{S as F,P as A,F as q}from"./star-_lWtu3Wc.js";const K=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],O=h("chevron-left",K);const Q=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],G=h("chevron-right",Q);const B=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],H=h("circle-alert",B);const U=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],X=h("circle-check-big",U);const Y=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J=h("clock",Y);const W=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],Z=h("command",W);const ee=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],C=h("loader-circle",ee);const te=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],E=h("search",te);const se=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],re=h("trash-2",se);const ie=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],ae=h("tv",ie);const ne=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],le=h("user",ne);const ce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oe=h("x",ce);function de({movie:t,onDelete:a}){const x=t.poster||"/placeholder-movie.svg";return e.jsxs("div",{className:"group relative h-[350px] bg-white/5 border border-white/10 rounded-xl overflow-hidden hover:border-white/20 transition-colors flex flex-col",children:[e.jsxs("div",{className:"relative h-[216px] flex-shrink-0 overflow-hidden",children:[e.jsx("img",{src:x,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onError:l=>{l.target.src="/placeholder-movie.svg"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),t.rating&&t.rating!=="N/A"&&e.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-yellow-500 text-black px-2 py-0.5 rounded text-xs font-bold",children:[e.jsx(F,{size:10,fill:"currentColor"}),t.rating]}),a&&e.jsx("button",{onClick:()=>a(t.id),className:"absolute top-2 left-2 p-1.5 bg-red-600 hover:bg-red-500 text-white rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove",children:e.jsx(re,{size:14})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2.5",children:[e.jsx("h3",{className:"text-sm font-semibold text-white line-clamp-1",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[t.year&&e.jsx("span",{children:t.year}),t.runtime&&t.runtime!=="N/A"&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(J,{size:10}),t.runtime]})]})]})]}),e.jsxs("div",{className:"flex-1 p-2.5 flex flex-col overflow-hidden",children:[t.genre&&t.genre!=="N/A"&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-1.5",children:t.genre.split(", ").slice(0,3).map(l=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-white/10 text-white/70 rounded",children:l},l))}),t.plot&&t.plot!=="N/A"&&e.jsx("p",{className:"text-[11px] text-white/50 line-clamp-3 leading-relaxed flex-1",children:t.plot}),t.director&&t.director!=="N/A"&&e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-white/40 pt-1.5 mt-auto border-t border-white/10",children:[e.jsx(le,{size:10}),e.jsxs("span",{className:"truncate",children:["Dir: ",t.director]})]})]})]})}const he=[10,20,50];function xe({currentPage:t,totalPages:a,totalItems:x,itemsPerPage:l,onPageChange:c,onItemsPerPageChange:u}){const f=(t-1)*l+1,o=Math.min(t*l,x);return x===0?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-8 pt-6 border-t border-white/10",children:[e.jsxs("div",{className:"text-sm text-white/50",children:["Showing ",e.jsxs("span",{className:"text-white/70 font-medium",children:[f,"-",o]})," of"," ",e.jsx("span",{className:"text-white/70 font-medium",children:x})," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>c(t-1),disabled:t===1,className:`flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg transition-all
            bg-white/5 border border-white/10 text-white/60
            hover:bg-white/10 hover:text-white hover:border-white/20
            disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white/5 disabled:hover:text-white/60 disabled:hover:border-white/10`,children:[e.jsx(O,{size:16}),"Prev"]}),e.jsxs("div",{className:"px-4 py-1.5 text-sm font-medium text-white/70 bg-white/5 border border-white/10 rounded-lg",children:["Page ",t," of ",a]}),e.jsxs("button",{onClick:()=>c(t+1),disabled:t===a,className:`flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg transition-all
            bg-white/5 border border-white/10 text-white/60
            hover:bg-white/10 hover:text-white hover:border-white/20
            disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-white/5 disabled:hover:text-white/60 disabled:hover:border-white/10`,children:["Next",e.jsx(G,{size:16})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-white/50",children:"Show:"}),e.jsx("div",{className:"flex items-center gap-1",children:he.map(d=>e.jsx("button",{onClick:()=>u(d),className:`px-2.5 py-1 text-sm font-medium rounded-md transition-all ${l===d?"bg-white text-black":"bg-white/5 text-white/60 hover:bg-white/10 hover:text-white border border-white/10"}`,children:d},d))})]})]})}function me({onSubmit:t}){const[a,x]=r.useState(!1),[l,c]=r.useState(""),[u,f]=r.useState(""),[o,d]=r.useState([]),[m,p]=r.useState(!1),[v,j]=r.useState(!1),[w,b]=r.useState(null),[y,N]=r.useState(!1),[s,k]=r.useState(0),_=r.useRef(null),S=r.useRef(null);r.useEffect(()=>{a&&S.current&&S.current.focus()},[a]),r.useEffect(()=>{const i=n=>{(n.metaKey||n.ctrlKey)&&n.key==="k"&&(n.preventDefault(),x(!0)),n.key==="Escape"&&a&&M()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[a]),r.useEffect(()=>{if(!a)return;const i=n=>{o.length!==0&&(n.key==="ArrowDown"?(n.preventDefault(),k(g=>(g+1)%o.length)):n.key==="ArrowUp"?(n.preventDefault(),k(g=>(g-1+o.length)%o.length)):n.key==="Enter"&&o.length>0&&(n.preventDefault(),z(o[s])))};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[a,o,s]),r.useEffect(()=>{k(0)},[o]),r.useEffect(()=>{function i(n){_.current&&!_.current.contains(n.target)&&M()}return a&&document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[a]),r.useEffect(()=>(document.body.style.overflow=a?"hidden":"",()=>{document.body.style.overflow=""}),[a]),r.useEffect(()=>{const i=setTimeout(()=>f(l),300);return()=>clearTimeout(i)},[l]),r.useEffect(()=>{(async()=>{if(u.trim().length<=2){d([]);return}p(!0),b(null);try{const g=await T({data:{query:u}});d(g)}catch(g){console.error(g),b("Search failed")}finally{p(!1)}})()},[u]);const M=()=>{x(!1),c(""),d([]),b(null)},z=async i=>{j(!0),b(null);try{await t(i.imdbID),N(!0),M(),setTimeout(()=>N(!1),3e3)}catch(n){b(n instanceof Error?n.message:"Failed to add")}finally{j(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg text-white/60 hover:text-white transition-all text-sm",children:[e.jsx(E,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Search..."}),e.jsxs("kbd",{className:"hidden md:flex items-center gap-0.5 px-1.5 py-0.5 bg-white/10 rounded text-xs text-white/40 ml-2",children:[e.jsx(Z,{size:10}),"K"]})]}),y&&e.jsxs("div",{className:"fixed bottom-4 right-4 flex items-center gap-2 text-white text-sm bg-white/10 border border-white/20 rounded-lg px-4 py-3 z-[60] backdrop-blur-sm",children:[e.jsx(X,{size:16}),"Added successfully!"]}),a&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[12vh]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs("div",{ref:_,className:"relative w-full max-w-xl mx-4 bg-neutral-950 border border-white/10 rounded-xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b border-white/10",children:[e.jsx(E,{size:18,className:"text-white/40"}),e.jsx("input",{ref:S,type:"text",value:l,onChange:i=>c(i.target.value),placeholder:"Search movies & TV shows...",disabled:v,className:"flex-1 bg-transparent text-white placeholder-white/40 focus:outline-none text-sm",autoComplete:"off"}),m&&e.jsx(C,{size:16,className:"text-white animate-spin"}),l&&!m&&e.jsx("button",{onClick:()=>c(""),className:"text-white/40 hover:text-white",children:e.jsx(oe,{size:16})})]}),e.jsxs("div",{className:"max-h-[360px] overflow-y-auto",children:[m&&l.trim().length>2&&e.jsx("div",{className:"p-6 text-center text-white/40 text-sm",children:"Searching..."}),!m&&o.length>0&&e.jsx("div",{className:"py-2",children:o.map((i,n)=>e.jsxs("button",{onClick:()=>z(i),onMouseEnter:()=>k(n),className:`w-full flex items-center gap-3 px-4 py-2.5 text-left transition-colors ${s===n?"bg-white/10":"hover:bg-white/5"}`,children:[e.jsx("div",{className:"w-10 h-14 bg-white/10 rounded overflow-hidden flex-shrink-0",children:i.Poster!=="N/A"?e.jsx("img",{src:i.Poster,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/30 text-xs",children:"N/A"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white text-sm font-medium truncate",children:i.Title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/40 mt-0.5",children:[e.jsx("span",{children:i.Year}),e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] uppercase font-medium bg-white/10",children:i.Type==="movie"?"Movie":"Series"})]})]}),e.jsx(A,{size:16,className:`text-white transition-opacity ${s===n?"opacity-100":"opacity-0"}`})]},i.imdbID))}),!m&&o.length===0&&l.trim().length>2&&e.jsx("div",{className:"p-6 text-center text-white/40 text-sm",children:"No results found"}),!m&&l.trim().length<=2&&e.jsx("div",{className:"p-6 text-center text-white/40 text-sm",children:"Type to search..."}),w&&e.jsxs("div",{className:"mx-4 mb-4 p-3 flex items-center gap-2 text-red-400 bg-red-500/10 border border-red-500/30 rounded-lg text-sm",children:[e.jsx(H,{size:16}),w]}),v&&e.jsxs("div",{className:"mx-4 mb-4 p-3 flex items-center gap-2 text-white bg-white/10 border border-white/20 rounded-lg text-sm",children:[e.jsx(C,{size:16,className:"animate-spin"}),"Adding..."]})]}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-white/10 text-xs text-white/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 py-0.5 bg-white/10 rounded",children:"↑↓"})," Navigate"]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 py-0.5 bg-white/10 rounded",children:"↵"})," Add"]})]}),e.jsxs("span",{children:[e.jsx("kbd",{className:"px-1 py-0.5 bg-white/10 rounded",children:"esc"})," Close"]})]})]})]})]})}function fe(){const t=$(),a=I.useLoaderData(),[x,l]=r.useState(null),[c,u]=r.useState("movie"),[f,o]=r.useState(1),[d,m]=r.useState(10),p=r.useMemo(()=>a.filter(s=>c==="movie"?s.type==="movie":s.type==="series"),[a,c]),v=Math.max(1,Math.ceil(p.length/d)),j=r.useMemo(()=>{const s=(f-1)*d;return p.slice(s,s+d)},[p,f,d]),w=s=>{u(s),o(1)},b=s=>{m(s),o(1)},y=async s=>{await P({data:s}),t.invalidate()},N=async s=>{l(s);try{await V({data:s}),t.invalidate()}finally{l(null)}};return e.jsxs("div",{className:"h-screen bg-black overflow-hidden flex flex-col",children:[e.jsx("div",{className:"fixed inset-0 bg-[linear-gradient(rgba(255,255,255,0.08)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.08)_1px,transparent_1px)] bg-[size:100px_100px] pointer-events-none"}),e.jsxs("header",{className:"sticky top-0 z-40 px-6 h-14 flex-shrink-0 flex items-center justify-between backdrop-blur-md bg-[linear-gradient(rgba(255,255,255,0.08)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.08)_1px,transparent_1px)] bg-[size:100px_100px] bg-black/80",children:[e.jsxs(D,{to:"/",className:"flex items-center gap-2",children:[e.jsx(R,{size:20,className:"text-white"}),e.jsx("span",{className:"font-semibold text-white",children:"MovieRecs"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-white/50 hover:text-white transition-colors",children:e.jsx(L,{size:18})})})]}),e.jsxs("div",{className:"relative flex-1 flex flex-col py-4 px-6 max-w-7xl mx-auto w-full overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white/5 border border-white/10 rounded-lg",children:[e.jsxs("button",{onClick:()=>w("movie"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${c==="movie"?"bg-white text-black":"text-white/60 hover:text-white"}`,children:[e.jsx(q,{size:16}),"Movies",e.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded ${c==="movie"?"bg-black/10":"bg-white/10"}`,children:a.filter(s=>s.type==="movie").length})]}),e.jsxs("button",{onClick:()=>w("series"),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${c==="series"?"bg-white text-black":"text-white/60 hover:text-white"}`,children:[e.jsx(ae,{size:16}),"TV Shows",e.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded ${c==="series"?"bg-black/10":"bg-white/10"}`,children:a.filter(s=>s.type==="series").length})]})]}),e.jsx(me,{onSubmit:y})]}),p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"w-40 h-40 mb-6 transition-transform hover:scale-105",children:e.jsx("img",{src:c==="movie"?"/empty-movies.svg":"/empty-tvshows.svg",alt:`No ${c==="movie"?"movies":"TV shows"}`,className:"w-full h-full"})}),e.jsxs("h2",{className:"text-xl font-medium text-white mb-2",children:["No ",c==="movie"?"movies":"TV shows"," yet"]}),e.jsxs("p",{className:"text-white/40 max-w-sm mb-6 text-sm",children:["Search above to add ",c==="movie"?"movies":"TV shows"," to your collection."]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:(c==="movie"?[{id:"tt0111161",name:"Shawshank Redemption"},{id:"tt0468569",name:"The Dark Knight"},{id:"tt1375666",name:"Inception"}]:[{id:"tt0903747",name:"Breaking Bad"},{id:"tt0944947",name:"Game of Thrones"},{id:"tt4574334",name:"Stranger Things"}]).map(s=>e.jsxs("button",{onClick:()=>y(s.id),className:"group px-3 py-1.5 rounded-full text-sm transition-all bg-white/5 hover:bg-white/10 text-white/60 hover:text-white border border-white/10 hover:border-white/20 flex items-center gap-1.5",children:[e.jsx(A,{size:14,className:"transition-transform group-hover:rotate-90"}),s.name]},s.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:j.map(s=>e.jsxs("div",{className:"relative",children:[x===s.id&&e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm rounded-xl flex items-center justify-center z-10",children:e.jsx(C,{className:"w-5 h-5 animate-spin text-white"})}),e.jsx(de,{movie:s,onDelete:N})]},s.id))})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(xe,{currentPage:f,totalPages:v,totalItems:p.length,itemsPerPage:d,onPageChange:o,onItemsPerPageChange:b})})]})]})]})}export{fe as component};
